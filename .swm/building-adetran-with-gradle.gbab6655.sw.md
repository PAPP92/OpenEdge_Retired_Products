---
title: Building adetran with Gradle
---
# Intro

This document explains how Gradle is used in the adetran project. It will cover the configuration and tasks defined in the Gradle build files.

<SwmSnippet path="/adetran/settings.gradle" line="1">

---

# Settings Configuration

The <SwmPath>[adetran/settings.gradle](adetran/settings.gradle)</SwmPath> file specifies the root project name as 'adetran'. This file was generated by the Gradle 'init' task and is used to include projects in the build.

```gradle
/*
 * This file was generated by the Gradle 'init' task.
 *
 * The settings file is used to specify which projects to include in your build.
 *
 * Detailed information about configuring a multi-project build in Gradle can be found
 * in the user manual at https://docs.gradle.org/5.6.3/userguide/multi_project_builds.html
 */

rootProject.name = 'adetran'

```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="4">

---

# Plugins and ABL Configuration

The <SwmPath>[adetran/build.gradle](adetran/build.gradle)</SwmPath> file applies the <SwmToken path="adetran/build.gradle" pos="5:4:10" line-data="    id &#39;progress.openedge.abl-base&#39; version &#39;1.0.0&#39;">`progress.openedge.abl-base`</SwmToken> plugin and configures the ABL settings. The <SwmToken path="adetran/build.gradle" pos="9:1:1" line-data="    dlcHome = new File(&quot;${System.env.DLC}&quot;)">`dlcHome`</SwmToken> is set to the DLC environment variable, and AVM options are specified.

```gradle
plugins {
    id 'progress.openedge.abl-base' version '1.0.0'
}

abl {
    dlcHome = new File("${System.env.DLC}")
    avmOptions {
        startupParameters = "-zn"
        tty {
            enabled = false
        }
    }

}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="19">

---

# Database Directory and Files

Defines the database directory and database files for <SwmToken path="adetran/build.gradle" pos="20:12:12" line-data="def xlprojdb = &quot;${dbdir}/xlproj.db&quot;">`xlproj`</SwmToken> and <SwmToken path="adetran/build.gradle" pos="21:12:12" line-data="def xlkitdb = &quot;${dbdir}/xlkit.db&quot;">`xlkit`</SwmToken>.

```gradle
def dbdir = "${buildDir}/adetran/data"
def xlprojdb = "${dbdir}/xlproj.db"
def xlkitdb = "${dbdir}/xlkit.db"
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="23">

---

# Extract ADE Comm Task

The <SwmToken path="adetran/build.gradle" pos="23:2:2" line-data="task extractADEcomm {">`extractADEcomm`</SwmToken> task extracts specific files from the <SwmToken path="adetran/build.gradle" pos="42:17:19" line-data="    inputs.files file(&quot;${abl.dlcHome}/src/adecomm.pl&quot;)">`adecomm.pl`</SwmToken> library. It ensures the output directory exists and extracts files if they do not already exist.

```gradle
task extractADEcomm {

    def extractables = [
        'adecomm/toolrun.i', 
        'adecomm/toolmenu.i', 
        'adecomm/toolsupp.i', 
        'adecomm/dirsrch.i', 
        'adecomm/cbvar.i',
        'adecomm/cbdropx.i',
        'adecomm/cbcdropx.i',
        'adecomm/cbtdropx.i',
        'adecomm/fileinfo.i',
        'adecomm/cbcomm.i',
        'adecomm/adeintl.i',
        'adecomm/adewrap.i',
        'adecomm/adestds.i',
        'adecomm/adefext.i'
    ]

    inputs.files file("${abl.dlcHome}/src/adecomm.pl")

```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="69">

---

# Create Kit Database Task

The <SwmToken path="adetran/build.gradle" pos="72:2:2" line-data="task createKitDB(type: CreateDB) {">`createKitDB`</SwmToken> task creates the <SwmToken path="adetran/build.gradle" pos="73:6:6" line-data="    dbName = &quot;xlkit&quot;">`xlkit`</SwmToken> database with a block size of 8. It ensures the output directory exists and converts the code page after creation.

```gradle
/**
create kit db
*/
task createKitDB(type: CreateDB) {
    dbName = "xlkit"
    blockSize = 8
    outputDir = "${dbdir}" 

    doFirst {
        mkdir "${dbdir}"
    }

    doLast {
        convertCodePage (xlkitdb)
    }
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="86">

---

# Connect Kit Database Task

The <SwmToken path="adetran/build.gradle" pos="89:2:2" line-data="task connectKitDB(type: DBConnection) {">`connectKitDB`</SwmToken> task defines the connection parameters for the <SwmToken path="adetran/build.gradle" pos="90:11:11" line-data="    dbName = &quot;${dbdir}/xlkit&quot;">`xlkit`</SwmToken> database and ensures the output directory exists.

```gradle
/**
define connection to xlkitdb
 */
task connectKitDB(type: DBConnection) {
    dbName = "${dbdir}/xlkit"
    connectionParameters = "-1 -ld kit"
    id = 'xlkit'
    doFirst {
        mkdir "${dbdir}"
    }
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="98">

---

# Load Tran Schema to Kit Database Task

The <SwmToken path="adetran/build.gradle" pos="98:2:2" line-data="task loadTranSchemaToKitDb(type: LoadDBSchema)  {">`loadTranSchemaToKitDb`</SwmToken> task loads the <SwmPath>[adetran/data/\_tran.df](adetran/data/_tran.df)</SwmPath> schema into the <SwmToken path="adetran/build.gradle" pos="102:4:4" line-data="    dbConnectionReferenceId &quot;xlkit&quot;">`xlkit`</SwmToken> database and builds the index after loading.

```gradle
task loadTranSchemaToKitDb(type: LoadDBSchema)  {
    dependsOn connectKitDB
    source 'data/_tran.df'

    dbConnectionReferenceId "xlkit"

    doLast {
        indexBuild(xlkitdb)
    }

```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="110">

---

# Load Kit Schema to Kit Database Task

The <SwmToken path="adetran/build.gradle" pos="110:2:2" line-data="task loadKitSchemaToKitDb(type: LoadDBSchema)  {">`loadKitSchemaToKitDb`</SwmToken> task loads the <SwmPath>[adetran/data/xlkit.df](adetran/data/xlkit.df)</SwmPath> schema into the <SwmToken path="adetran/build.gradle" pos="112:6:6" line-data="    source &#39;data/xlkit.df&#39;">`xlkit`</SwmToken> database.

```gradle
task loadKitSchemaToKitDb(type: LoadDBSchema)  {
    dependsOn connectKitDB
    source 'data/xlkit.df'
    dbConnectionReferenceId "xlkit"
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="116">

---

# Create Kit Task

The <SwmToken path="adetran/build.gradle" pos="116:2:2" line-data="task createKit() {">`createKit`</SwmToken> task depends on the creation and schema loading tasks for the <SwmToken path="adetran/build.gradle" pos="21:12:12" line-data="def xlkitdb = &quot;${dbdir}/xlkit.db&quot;">`xlkit`</SwmToken> database.

```gradle
task createKit() {
    dependsOn createKitDB
    dependsOn loadTranSchemaToKitDb
    dependsOn loadKitSchemaToKitDb
    dependsOn connectKitDB
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="123">

---

# Convert Code Page Function

The <SwmToken path="adetran/build.gradle" pos="123:2:2" line-data="def convertCodePage(String db) {">`convertCodePage`</SwmToken> function converts the code page of a given database.

```gradle
def convertCodePage(String db) {

    mkdir "${buildDir}/temp"

    exec {
        workingDir = "${buildDir}/temp"
        commandLine "${abl.dlcHome}/bin/_proutil", "-z3", db, "-C", "convchar", "convert", "undefined", "-G", "0"
        standardInput = new ByteArrayInputStream("y\r\n".getBytes())
    }
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="134">

---

# Index Build Function

The <SwmToken path="adetran/build.gradle" pos="134:2:2" line-data="def indexBuild(String db) {">`indexBuild`</SwmToken> function builds the index for a given database.

```gradle
def indexBuild(String db) {
    mkdir "${buildDir}/temp"

    exec {
        workingDir = "${buildDir}/temp"
        commandLine "${abl.dlcHome}/bin/_proutil", "-z3", db, "-C", "idxbuild", "all", "-G", "0"
    }
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="143">

---

# Create xlproj Database Task

The <SwmToken path="adetran/build.gradle" pos="146:2:2" line-data="task createxlprojdb(type: CreateDB) {">`createxlprojdb`</SwmToken> task creates the <SwmToken path="adetran/build.gradle" pos="147:6:6" line-data="    dbName = &quot;xlproj&quot;">`xlproj`</SwmToken> database with a block size of 8. It ensures the output directory exists and converts the code page after creation.

```gradle
/**
create the xlprojdb
 */
task createxlprojdb(type: CreateDB) {
    dbName = "xlproj"
    blockSize = 8
    outputDir = "${dbdir}"

    doFirst {
        mkdir "${dbdir}"
    }
    doLast {
       convertCodePage(xlprojdb)
    }    
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="160">

---

# Connect xlproj Database Task

The <SwmToken path="adetran/build.gradle" pos="163:2:2" line-data="task connectxlprojdb(type: DBConnection) {">`connectxlprojdb`</SwmToken> task defines the connection parameters for the <SwmToken path="adetran/build.gradle" pos="165:11:11" line-data="    dbName = &quot;${dbdir}/xlproj&quot;">`xlproj`</SwmToken> database.

```gradle
/**
define connection to xlprojdb
 */
task connectxlprojdb(type: DBConnection) {
    connectionParameters = "-1 -ld xlatedb"
    dbName = "${dbdir}/xlproj"
    id = 'xlproj'
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="169">

---

# Load Tran Schema to xlproj Database Task

The <SwmToken path="adetran/build.gradle" pos="169:2:2" line-data="task loadTranSchemaToxlprojdb(type: LoadDBSchema)  {">`loadTranSchemaToxlprojdb`</SwmToken> task loads the <SwmPath>[adetran/data/\_tran.df](adetran/data/_tran.df)</SwmPath> schema into the <SwmToken path="adetran/build.gradle" pos="172:4:4" line-data="    dbConnectionReferenceId &quot;xlproj&quot;">`xlproj`</SwmToken> database and builds the index after loading.

```gradle
task loadTranSchemaToxlprojdb(type: LoadDBSchema)  {
    dependsOn connectxlprojdb
    source 'data/_tran.df'
    dbConnectionReferenceId "xlproj"

    doLast {
        indexBuild(xlprojdb)
    }
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="179">

---

# Load Kit Schema to xlproj Database Task

The <SwmToken path="adetran/build.gradle" pos="179:2:2" line-data="task loadKitSchemaToxlprojdb(type: LoadDBSchema)  {">`loadKitSchemaToxlprojdb`</SwmToken> task loads the <SwmPath>[adetran/data/xlproj.df](adetran/data/xlproj.df)</SwmPath> schema into the <SwmToken path="adetran/build.gradle" pos="181:6:6" line-data="    source &#39;data/xlproj.df&#39;">`xlproj`</SwmToken> database.

```gradle
task loadKitSchemaToxlprojdb(type: LoadDBSchema)  {
    dependsOn connectxlprojdb
    source 'data/xlproj.df'
    dbConnectionReferenceId "xlproj"
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="186">

---

# Create Xlate Task

The <SwmToken path="adetran/build.gradle" pos="186:2:2" line-data="task createXlate () {">`createXlate`</SwmToken> task depends on the creation and schema loading tasks for the <SwmToken path="adetran/build.gradle" pos="20:12:12" line-data="def xlprojdb = &quot;${dbdir}/xlproj.db&quot;">`xlproj`</SwmToken> database.

```gradle
task createXlate () {
    dependsOn createxlprojdb
    dependsOn loadTranSchemaToxlprojdb
    dependsOn loadKitSchemaToxlprojdb
    dependsOn connectxlprojdb
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="195">

---

# Compile Code Task

The <SwmToken path="adetran/build.gradle" pos="195:2:2" line-data="task compileCode(type: ABLCompile) {">`compileCode`</SwmToken> task compiles ABL source code, including `.p` and `.w` files, and places the compiled code in the <SwmToken path="adetran/build.gradle" pos="201:11:11" line-data="    rcodeDir = &quot;${buildDir}/rcode&quot;">`rcode`</SwmToken> directory. It sets the propath and database connections.

```gradle
task compileCode(type: ABLCompile) {
    dependsOn createKit 
    dependsOn createXlate
    dependsOn extractADEcomm
    source 'src/main/abl'
    include '**/*.p',  '**/*.w'
    rcodeDir = "${buildDir}/rcode"
    propath  "${projectDir}/src/main/abl", "${buildDir}"
    dbConnectionReferenceId 'xlkit'
    dbConnectionReferenceId 'xlproj'


}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="209">

---

# Copy Images Task

The <SwmToken path="adetran/build.gradle" pos="209:2:2" line-data="task copyImages(type : Copy) {">`copyImages`</SwmToken> task copies image files from the <SwmToken path="adetran/build.gradle" pos="210:4:4" line-data="    from(&#39;images&#39;)">`images`</SwmToken> directory to the build resources directory.

```gradle
task copyImages(type : Copy) {
    from('images')
    into("${buildDir}/resources/adetran/images")
    doFirst {
        mkdir  "${buildDir}/resources/adetran/images"
    }
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="217">

---

# Copy Labels Task

The <SwmToken path="adetran/build.gradle" pos="217:2:2" line-data="task copyLabels(type : Copy) {">`copyLabels`</SwmToken> task copies label files from the <SwmToken path="adetran/build.gradle" pos="219:4:4" line-data="    from(&#39;labels&#39;)">`labels`</SwmToken> directory to the build resources directory.

```gradle
task copyLabels(type : Copy) {

    from('labels')
    into("${buildDir}/resources/adetran/labels")

    doFirst {
        mkdir "${buildDir}/resources/adetran/labels"
    }    
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="227">

---

# Create PL Task

The <SwmToken path="adetran/build.gradle" pos="227:2:2" line-data="task createPL(type: PL) {">`createPL`</SwmToken> task creates a procedure library (<SwmToken path="adetran/build.gradle" pos="230:13:15" line-data="    plFile = &quot;${buildDir}/lib/tranman.pl&quot;">`tranman.pl`</SwmToken>) from the compiled code in the <SwmToken path="adetran/build.gradle" pos="231:9:9" line-data="    from &quot;${buildDir}/rcode&quot;">`rcode`</SwmToken> directory.

```gradle
task createPL(type: PL) {

    dependsOn compileCode
    plFile = "${buildDir}/lib/tranman.pl"
    from "${buildDir}/rcode"
    include "**/*.r"

    doFirst {
        mkdir "${buildDir}/lib"
    }

```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="240">

---

# Build Task

The <SwmToken path="adetran/build.gradle" pos="240:2:2" line-data="task build {">`build`</SwmToken> task depends on the <SwmToken path="adetran/build.gradle" pos="241:3:3" line-data="    dependsOn copyImages">`copyImages`</SwmToken>, <SwmToken path="adetran/build.gradle" pos="242:3:3" line-data="    dependsOn copyLabels">`copyLabels`</SwmToken>, and <SwmToken path="adetran/build.gradle" pos="243:3:3" line-data="    dependsOn createPL">`createPL`</SwmToken> tasks.

```gradle
task build {
    dependsOn copyImages
    dependsOn copyLabels
    dependsOn createPL
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/build.gradle" line="246">

---

# Clean Task

The <SwmToken path="adetran/build.gradle" pos="246:2:2" line-data="task clean {">`clean`</SwmToken> task deletes the build directory.

```gradle
task clean {
    delete file ("${buildDir}")
}
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/gradlew.bat" line="1">

---

# Gradle Wrapper Script for Windows

The <SwmPath>[adetran/gradlew.bat](adetran/gradlew.bat)</SwmPath> script is a Windows batch file for running Gradle tasks. It sets up the environment and executes the Gradle wrapper.

```batchfile
@rem
@rem Copyright 2015 the original author or authors.
@rem
@rem Licensed under the Apache License, Version 2.0 (the "License");
@rem you may not use this file except in compliance with the License.
@rem You may obtain a copy of the License at
@rem
@rem      https://www.apache.org/licenses/LICENSE-2.0
@rem
@rem Unless required by applicable law or agreed to in writing, software
@rem distributed under the License is distributed on an "AS IS" BASIS,
@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@rem See the License for the specific language governing permissions and
@rem limitations under the License.
@rem

@if "%DEBUG%" == "" @echo off
@rem ##########################################################################
@rem
@rem  Gradle startup script for Windows
@rem
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/gradlew" line="1">

---

# Gradle Wrapper Script for Unix

The `gradlew` script is a Unix shell script for running Gradle tasks. It sets up the environment and executes the Gradle wrapper.

```
#!/usr/bin/env sh

#
# Copyright 2015 the original author or authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

##############################################################################
##
##  Gradle start up script for UN*X
```

---

</SwmSnippet>

<SwmSnippet path="/adetran/gradle/wrapper/gradle-wrapper.properties" line="1">

---

# Gradle Wrapper Properties

The <SwmPath>[adetran/gradle/wrapper/gradle-wrapper.properties](adetran/gradle/wrapper/gradle-wrapper.properties)</SwmPath> file specifies the Gradle distribution to use. It points to the Gradle <SwmToken path="adetran/gradle/wrapper/gradle-wrapper.properties" pos="3:14:18" line-data="distributionUrl=https\://services.gradle.org/distributions/gradle-5.6.4-bin.zip">`5.6.4`</SwmToken> binary distribution.

```ini
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-5.6.4-bin.zip
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
```

---

</SwmSnippet>

&nbsp;

*This is an auto-generated document by Swimm 🌊 and has not yet been verified by a human*

<SwmMeta version="3.0.0" repo-id="Z2l0aHViJTNBJTNBT3BlbkVkZ2VfUmV0aXJlZF9Qcm9kdWN0cyUzQSUzQVBBUFA5Mg==" repo-name="OpenEdge_Retired_Products"><sup>Powered by [Swimm](/)</sup></SwmMeta>
